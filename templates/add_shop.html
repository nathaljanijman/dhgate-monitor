{% extends "base.html" %}

{% block title %}Shop toevoegen - DHgate monitor{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <h2 class="no-text-transform"><i class="fas fa-plus"></i> Nieuwe shop toevoegen</h2>
        <p class="text-muted">Voeg een DHgate shop toe aan je monitor lijst</p>

        <form method="POST" class="mt-4">
            <div class="mb-3">
                <label for="name" class="form-label">
                    <i class="fas fa-tag"></i> Shop Naam *
                </label>
                <input type="text" 
                       class="form-control" 
                       id="name" 
                       name="name" 
                       placeholder="Bijv: Nike Kids Store"
                       required>
                <div class="form-text">Geef de shop een herkenbare naam</div>
            </div>

            <div class="mb-3">
                <label for="url" class="form-label">
                    <i class="fas fa-link"></i> DHgate URL *
                </label>
                <input type="url" 
                       class="form-control" 
                       id="url" 
                       name="url" 
                       placeholder="https://www.dhgate.com/store/12345678"
                       required>
                <div class="form-text">
                    Ondersteunde formaten:
                    <ul class="small mt-1 mb-0">
                        <li>Store URL: https://www.dhgate.com/store/12345678</li>
                        <li>Wholesale URL: https://www.dhgate.com/wholesale/kids+jerseys.html</li>
                    </ul>
                </div>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-gradient">
                    <i class="fas fa-plus"></i> Shop Toevoegen
                </button>
                <a href="{{ url_for('index') }}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left"></i> Terug
                </a>
            </div>
        </form>
    </div>

    <div class="col-md-4">
        <div class="qr-section mb-4">
            <h5><i class="fas fa-qrcode"></i> Mobiele Toegang</h5>
            <p class="small text-muted mb-3">Deel deze pagina met je telefoon</p>
            <img src="{{ qr_code }}" class="img-fluid" style="max-width: 200px;" alt="QR Code">
            <div class="mt-2">
                <small class="text-muted">{{ request.url }}</small>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h6 class="mb-0"><i class="fas fa-lightbulb"></i> Tips</h6>
            </div>
            <div class="card-body">
                <ul class="small mb-0">
                    <li class="mb-2">
                        <strong>Store URL:</strong> Ga naar een DHgate verkoper pagina en kopieer de URL
                    </li>
                    <li class="mb-2">
                        <strong>Wholesale URL:</strong> Zoek naar "kids" producten en kopieer de zoekresultaten URL
                    </li>
                    <li class="mb-2">
                        <strong>Naam:</strong> Kies een naam die je helpt de verkoper te herkennen
                    </li>
                </ul>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h6 class="mb-0"><i class="fas fa-info-circle"></i> Hoe werkt het?</h6>
            </div>
            <div class="card-body">
                <p class="small mb-0">
                    Nadat je een shop toevoegt, zal de monitor dagelijks controleren 
                    op nieuwe kids producten van deze verkoper. Je krijgt automatisch 
                    een email als er nieuwe items zijn gevonden.
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Auto-detect DHgate URLs and suggest names
document.getElementById('url').addEventListener('input', function() {
    const url = this.value;
    const nameField = document.getElementById('name');
    
    if (url.includes('dhgate.com/store/') && !nameField.value) {
        const storeId = url.match(/store\/(\d+)/);
        if (storeId) {
            nameField.value = `DHgate Store ${storeId[1]}`;
        }
    }
});
</script>
{% endblock %}